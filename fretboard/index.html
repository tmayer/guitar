<!DOCTYPE html>
<html>
<head>
    <!-- Required meta tags -->
    <meta charset="utf-8">
    <title>Guitar Fretboard Navigation - Thomas Mayer</title>
    <meta name="viewport" content="width=device-width">
    <link rel="stylesheet" type="text/css" href="https://maxcdn.bootstrapcdn.com/bootstrap/3.3.6/css/bootstrap.min.css">

    <script src="https://d3js.org/d3.v4.min.js"></script>  
    <script src="https://cdnjs.cloudflare.com/ajax/libs/underscore.js/1.5.2/underscore-min.js" type="text/javascript"></script>
    <script src="https://unpkg.com/vexflow/releases/vexflow-min.js" type="text/javascript"></script>
    <script src="vexflow-json.js" type="text/javascript"></script>
    <script type="text/javascript" src="https://cdnjs.cloudflare.com/ajax/libs/babel-standalone/6.26.0/babel.js"></script>

    <script
      type="text/javascript"
      src="https://code.jquery.com/jquery-2.2.4.min.js"
      
    ></script>
  
  
        <script type="text/javascript" src="https://npmcdn.com/vexflow/releases/vexflow-debug.js"></script>
    <style>
    #fretboard {
        position: relative;
    }
    .fretnum {
        position: relative;
        top: -40px;
        margin: 0;
        display: inline;
        padding: 0;
        font-family: Helvetica;
        text-transform: uppercase;
    }
    .tuning {
        left: 4px;
        font-size: 10px;
    }
    .fretnum {
        font-size: 15px;
    }

    .fretnumbers {
        position: relative;
        display: inline;
        top: -40px;
        //margin-left: 48px;
        width: 30px;
        padding: 0;
        font-family: Helvetica;
        text-transform: uppercase;
    }

    .hidden {
        display: None;
    }


    </style>


</head>
<body>

    <div style="margin-left: 40px;">
        <div>
            <h2>Guitar Fretboard Navigation</h2>
            <h4>An interactive visualization</h4>
            <p>If you hover over the notes on the stave or fretboard, you see the corresponding notes.</p>
        </div>
    </div>
    <div>
      <div id="fretboard">
      </div>
    </div>
    
    <div style="display: block; margin-top: -18px;">
        <div id="boo">
        </div>
    </div>
    <div style="display: block;">
        <div id="boo2">
        </div>
    </div>

    
  </div>
<script src="https://cdnjs.cloudflare.com/ajax/libs/d3/4.1.1/d3.js"></script>
<script src="draw.js"></script>
<script type="text/jsx"
    data-presets="es2017,react,stage-0"
    data-plugins="transform-decorators-legacy">


plotFretNotes = function(width){


    //this allows us to collect the width of the div where the SVG will go.
    width = width > 1600 ? 1600 : width;
    var height = width / 3.236;

    var fretWidth = 60;
    $("#text").html(width);
    var frets = Math.ceil(width/fretWidth) > 26 ? 24 : Math.ceil(width/fretWidth) - 2;
    var fretHeight = fretWidth/2.6;
    console.log(width, frets, fretWidth, fretHeight);
    
    var aPhrygian = Fretboard({tuning: Tunings.E_std, 
                            frets: frets,
                            fretWidth: fretWidth,
                            fretHeight: fretHeight,
                            notesWidth: width
                            });
    aPhrygian.scale("c major");

    renderNotes([], width, frets);
}

myFunction = function(){
    window.setTimeout(function(){
        var width = window.visualViewport.width;

        plotFretNotes(width-20);
    }, 400);
}

myFunction();
window.addEventListener("resize", myFunction);
window.addEventListener("deviceorientation", myFunction);

</script>
</body>
</html>